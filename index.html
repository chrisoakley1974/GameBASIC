<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GameBASIC</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">
    <div class="layout">
      <section class="editor">
        <div class="toolbar">
          <button id="runBtn">Run</button>
          <button id="stopBtn">Stop</button>
          <button id="spriteEditorBtn" type="button">Sprite Editor</button>
          <button id="saveBtn">Save</button>
          <button id="loadBtn">Load</button>
          <input id="fileInput" type="file" accept=".basic,.bas,.txt" hidden />
          <span class="toolbar-spacer"></span>
          <button id="exportHtmlBtn" type="button">Export HTML</button>
          <span id="shareStatus" class="toolbar-status" aria-live="polite"></span>
          <a class="toolbar-link" href="help.html" target="_blank" rel="noopener">Help</a>
        </div>
        <div class="code-editor">
          <pre id="lineNumbers" aria-hidden="true"></pre>
          <pre id="highlight" aria-hidden="true"></pre>
          <textarea id="programInput" spellcheck="false" wrap="soft"></textarea>
        </div>
      </section>

      <section class="panel">
        <div class="panel-block">
          <div class="panel-header">
            <h2>Screen</h2>
            <div class="screen-controls">
              <label for="screenSize">Size</label>
              <select id="screenSize">
                <option value="2x" selected>640x400</option>
                <option value="1x">320x200</option>
              </select>
              <button id="popoutBtn" type="button">Pop out</button>
            </div>
          </div>
          <div id="screenHost">
            <canvas id="screen" width="320" height="200"></canvas>
          </div>
        </div>
        <div class="engine-attribution" style="margin:0 0 0 0;text-align:left;font-size:1.08em;color:#ffe49a;">
          <p><strong>GameBASIC</strong> is a retro-inspired BASIC language developed by Chris Oakley</p>
          <p>Write fast-paced, pixel-perfect arcade games just like the classics of the 80s and 90s and bring the golden age of gaming back to life, right in your browser, then export them into a fully working HTML file.</p>
          <p>Think ZX Spectrum BASIC, BBC Micro BASIC, STOS and AMOS all-in-one.</p>
          Support it <a href="https://github.com/chrisoakley1974/GameBASIC" target="_blank" rel="noopener" style="color:#8fd3ff;text-decoration:underline;">View on GitHub</a>
        </div>
        <div class="engine-attribution">
          <style>.pp-3FW2D6ZNMZYQA{text-align:center;border:none;border-radius:0.25rem;min-width:11.625rem;padding:0 2rem;height:2.625rem;font-weight:bold;background-color:#FFD140;color:#000000;font-family:"Helvetica Neue",Arial,sans-serif;font-size:1rem;line-height:1.25rem;cursor:pointer;}</style>
          <form action="https://www.paypal.com/ncp/payment/3FW2D6ZNMZYQA" method="post" target="_blank" style="display:inline-grid;justify-items:center;align-content:start;gap:0.5rem;">
            <input class="pp-3FW2D6ZNMZYQA" type="submit" value="Buy Chris a Coffee" />
            <img src=https://www.paypalobjects.com/images/Debit_Credit_APM.svg alt="cards" />
            <section style="font-size: 0.75rem;"> Powered by <img src="https://www.paypalobjects.com/paypal-ui/logos/svg/paypal-wordmark-color.svg" alt="paypal" style="height:0.875rem;vertical-align:middle;"/></section>
          </form>
        </div>
      </section>
    </div>
  </div>

  <div id="spriteEditorModal" class="modal" aria-hidden="true">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Sprite Editor</h2>
        <button id="spriteEditorClose" type="button">Close</button>
      </div>
      <div class="modal-body">
        <div class="sprite-toolbar">
          <input id="spriteFileInput" type="file" accept="image/png" hidden />
          <button id="spriteLoadBtn" type="button">Load PNG</button>
          <button id="spriteSaveBtn" type="button">Save PNG</button>
          <button id="spriteUndoBtn" type="button">Undo</button>
          <button id="spriteRedoBtn" type="button">Redo</button>
          <label>Sheet W <input id="spriteWidth" type="number" min="1" value="64" /></label>
          <label>Sheet H <input id="spriteHeight" type="number" min="1" value="64" /></label>
          <button id="spriteResizeBtn" type="button">Set Size</button>
          <label>Frame W <input id="spriteFrameW" type="number" min="1" value="16" /></label>
          <label>Frame H <input id="spriteFrameH" type="number" min="1" value="16" /></label>
          <button id="spriteToolBrush" type="button" class="tool-btn active">Brush</button>
          <button id="spriteToolFill" type="button" class="tool-btn">Fill</button>
          <label>Brush <input id="spriteBrush" type="number" min="1" max="32" value="1" /></label>
          <label>Color <input id="spriteColor" type="color" value="#ffd166" /></label>
          <label><input id="spriteGridToggle" type="checkbox" checked /> Grid</label>
        </div>
        <div class="sprite-editor-area">
          <div class="sprite-canvas-wrap">
            <div id="spriteCanvasStage" class="sprite-canvas-stage">
              <canvas id="spriteEditorCanvas" width="64" height="64"></canvas>
              <canvas id="spriteGridCanvas" width="64" height="64"></canvas>
            </div>
          </div>
          <div class="sprite-output">
            <label for="spriteDataUrl">Data URL</label>
            <textarea id="spriteDataUrl" readonly></textarea>
            <div class="sprite-output-actions">
              <button id="spriteCopyBtn" type="button">Copy</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="engine.js"></script>
</body>
</html>
